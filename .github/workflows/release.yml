name: Release

on:
  release:
    types: [published]

jobs:
  broadcast_release:
    steps:
      - name: Homebrew Cask Bumper
        uses: EINDEX/bump-homebrew-cask-action@v1.1
        with:
          token: ${{ secrets.GH_TOKEN }}
          package: 'fishing-funds'

      - name: Send telegram message after Build
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          disable_web_page_preview: true
          photo: screenshots/banner.png
          format: markdown
          message: |
            *🚀 Fishing Funds Updated 🎉*
            Version: ${{ github.ref_name }}

            💻 ${{ github.actor }} created releases

            📜 See changes: https://github.com/${{ github.repository }}/releases

            ⬇️ Download: https://ff.1zilc.top

            Join 👉 [@FishingFunds基金交流群](https://t.me/fishing_funds)
            Follow 👉 [@FishingFunds更新](https://t.me/fishing_funds_update)
